/** estrada -v0.0.1
* Copyright (c) 2015 Weslley Araujo <weslleyaraujo20@gmail.com>
* Licensed MIT
*/

!function(a,b){"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?module.exports=b():a.Estrada=b()}(this,function(){"use strict";function a(){this.routes={},this.bind(),this.setup()}return a.prototype.bind=function(){"undefined"!=typeof window&&window.addEventListener("hashchange",this.onHasChange.bind(this),!1)},a.prototype.onHasChange=function(){this.setup(),this.start()},a.prototype.register=function(a){return a.routes=a.routes||{},Object.keys(a.routes).forEach(function(b){this.routes[b]={callback:this.callbackHandler(a[a.routes[b]]),match:this.createMatch(b)}}.bind(this)),this},a.prototype.callbackHandler=function(a){return"function"==typeof a?a:function(){console.log("[router]: callback not found for this route!")}},a.prototype.getParameters=function(a){var b=[],c=this.options.hash.split("/");return a=this.prepareRoute(a).split("/"),a.forEach(function(a,d){a.match(/:/)&&b.push(c[d])}),b},a.prototype.createMatch=function(a){return a=this.prepareRoute(a),"/"===a?new RegExp(/^\s*$/):a.split("/").map(function(a){return a.match(/:/)?"[^\\/]*":a}).join("\\/")+"$"},a.prototype.prepareRoute=function(a){return"/"===a.charAt(0)?a:"/"+a},a.prototype.start=function(){var a;Object.keys(this.routes).forEach(function(b){a=this.routes[b],this.isMatch(this.options.hash,a.match)&&a.callback.apply(this,this.getParameters(b))}.bind(this))},a.prototype.isMatch=function(a,b){return!!a.match(b)},a.prototype.setup=function(){var a=document.location.hash.replace(/#/,"");this.options={hash:a}},new a});